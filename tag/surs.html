<!DOCTYPE html>
<html lang="en">
<head>
  <title>Why Not Wingnut? - SURS</title>
  <meta charset="utf-8" />
      <link rel="stylesheet" href="http://qalthos.github.io/blog/theme/css/main.min.css?e2893169" type="text/css" />
        <link href="http://qalthos.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Why Not Wingnut? Atom Feed" />
    
  <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!--[if lte IE 7]>
    <link rel="stylesheet" type="text/css" media="all" href="http://qalthos.github.io/blog/css/ie.css"/>
    <script src="http://qalthos.github.io/blog/js/IE8.js" type="text/javascript"></script>
  <![endif]-->

  <!--[if lt IE 7]>
    <link rel="stylesheet" type="text/css" media="all" href="http://qalthos.github.io/blog/css/ie6.css"/>
  <![endif]-->

</head>

<body id="index" class="home">
    <header id="banner" class="body">
    <h1><a href="http://qalthos.github.io/blog/">Why Not Wingnut? </a></h1>
    <nav><ul>
              <li ><a href="http://qalthos.github.io/blog/category/civx.html">CIVX</a></li>
              <li ><a href="http://qalthos.github.io/blog/category/fossrit.html">FOSS@RIT</a></li>
              <li ><a href="http://qalthos.github.io/blog/category/meta.html">meta</a></li>
              <li ><a href="http://qalthos.github.io/blog/category/personal.html">personal</a></li>
                                        <li><a href="http://qalthos.github.io/resume/resume.pdf">resume</a></li>
          </ul></nav>
  </header><!-- /#banner -->
          
            

                            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://qalthos.github.io/blog/multiprocessing-the-polyscraper.html">Multiprocessing the PolyScraper</a></h1> 
                    <footer class="post-info">
                <p><img src="http://www.gravatar.com/avatar/3a3baabff105b46a458688ecf49901af" /></p>
                <abbr class="published" title="2011-06-29T18:04:00">
                Wed 29 June 2011
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://qalthos.github.io/blog/author/nathaniel-case.html">Nathaniel Case</a>
        </address>
        <p>In <a href="http://qalthos.github.io/blog/category/civx.html">CIVX</a>. </p>
<p>tags: <a href="http://qalthos.github.io/blog/tag/hackathon.html">hackathon</a><a href="http://qalthos.github.io/blog/tag/surs.html">SURS</a><a href="http://qalthos.github.io/blog/tag/polyscraper.html">polyscraper</a></p>
</footer><!-- /.post-info --><p>Warning: This post was written at 4AM and contains a technical account
of what I have been doing attempting to parallelize CIVX's internals. If
you are looking for a more general overview of what I have been doing
recently, you are better off looking to another one of my posts.
Recently, I have been working on CIVX's PolyScraper, a neat little piece
of code designed to be able to read and understand structured text
without knowing how the text is structured beforehand. On Thursday, I
let a test scrape of a rather large dataset start, figuring it would
finish sometime over the weekend and I'd be able to pick it up on
Monday. Then Monday rolled around, and the scrape was still running.
Worse, it didn't seem to be taking full advantage of the available
resources. Running as it was on the boat, it had four cores at its
disposal, however it was steadfastly using only one core.
Now PolyScraping is not an inherently parallelizable task, but on large
datasets it should benefit from some kind of parallelization,
particularly when using large numbers of small files (less so with small
numbers of large files, those types of tasks are usually sequential as
you have a smaller number of resources blocking on read IO). Clearly
there were other things to look into, but if I could do this, this would
mean a huge win for offline scraping, which was one of the things I had
enabled with my addition of local file support to the PolyScraper.
This all led me to <a class="reference external" href="http://docs.python.org/library/multiprocessing.html">multiprocessing</a>, a library I'd been wanting to try
out in python for some time now. Without going into too much detail,
multiprocessing attempts to get around the <a class="reference external" href="http://docs.python.org/glossary.html#term-global-interpreter-lock">Global Interpreter Lock</a> by
spawning subprocesses instead of threads.
The first attempt was written pretty quickly, as I still remember a lot
from my Parallel Computing class from a while ago. Indeed the main
problem turned out to be SQLAlchemy, or, more specifically our use of
sqlite for a backend db. Sqlite is not the most robust of databases and
can't really handle multiple processes attempting to write to the db at
once. Luke suggested (and I would love to try) moving over to Postgres
as we will eventually be doing on the boat, but unfortunately the boat
has been 'stuck ashore' for some time now due to an extended outage in
CSH's network.
In the meantime I have been whittling the process down to what I think
is the essentials. In the process I have made a complete mess of the
code concerning the PolyScraper, but I should be able to make things at
least look like the way they were before too long.
At this point, though, I have been working on this project for close to
20 hours today now. Luke is in town and we're all posted up in Remy's
new place all hacking on our projects together. With any luck a good
night's sleep will clear my head and give me new ideas for tomorrow.</p>
                </article>
                            </aside><!-- /#featured -->
                            <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">
                                                

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://qalthos.github.io/blog/back-up-to-speed.html" rel="bookmark"
                           title="Permalink to Back up to Speed">Back up to Speed</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                <p><img src="http://www.gravatar.com/avatar/3a3baabff105b46a458688ecf49901af" /></p>
                <abbr class="published" title="2011-06-21T22:56:00">
                Tue 21 June 2011
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://qalthos.github.io/blog/author/nathaniel-case.html">Nathaniel Case</a>
        </address>
        <p>In <a href="http://qalthos.github.io/blog/category/civx.html">CIVX</a>. </p>
<p>tags: <a href="http://qalthos.github.io/blog/tag/peopledashboard.html">peopledashboard</a><a href="http://qalthos.github.io/blog/tag/widgets.html">widgets</a><a href="http://qalthos.github.io/blog/tag/scrapers.html">scrapers</a><a href="http://qalthos.github.io/blog/tag/surs.html">SURS</a></p>
</footer><!-- /.post-info -->                <p>I've almost closed <a class="reference external" href="https://fedorahosted.org/civx/ticket/106">bug #106</a>. I've done all I can do for now, until I
can figure out how to attribute actions to senators. Until then, I
should comment out the 'actions' tab tomorrow with a note letting
whoever tries this next what I've already tried.
There ...</p>
                <a class="readmore" href="http://qalthos.github.io/blog/back-up-to-speed.html">read more</a>
                                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://qalthos.github.io/blog/shelves-and-shoves.html" rel="bookmark"
                           title="Permalink to Shelves and Shoves">Shelves and Shoves</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                <p><img src="http://www.gravatar.com/avatar/3a3baabff105b46a458688ecf49901af" /></p>
                <abbr class="published" title="2011-06-21T22:56:00">
                Tue 21 June 2011
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://qalthos.github.io/blog/author/nathaniel-case.html">Nathaniel Case</a>
        </address>
        <p>In <a href="http://qalthos.github.io/blog/category/civx.html">CIVX</a>. </p>
<p>tags: <a href="http://qalthos.github.io/blog/tag/peopledashboard.html">peopledashboard</a><a href="http://qalthos.github.io/blog/tag/widgets.html">widgets</a><a href="http://qalthos.github.io/blog/tag/scrapers.html">scrapers</a><a href="http://qalthos.github.io/blog/tag/surs.html">SURS</a></p>
</footer><!-- /.post-info -->                <p>Today is the day to hit <a class="reference external" href="https://fedorahosted.org/civx/ticket/105">bug #105</a>, another of the leftover bugs from
last year.
The story goes something like this: there's a lot of data on
nysenate.gov that is nice to have, but asking for that info on every
call is a little cumbersome. We want ...</p>
                <a class="readmore" href="http://qalthos.github.io/blog/shelves-and-shoves.html">read more</a>
                                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://qalthos.github.io/blog/summer-of-civx.html" rel="bookmark"
                           title="Permalink to Summer of CIVX">Summer of CIVX</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                <p><img src="http://www.gravatar.com/avatar/3a3baabff105b46a458688ecf49901af" /></p>
                <abbr class="published" title="2011-06-21T22:56:00">
                Tue 21 June 2011
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://qalthos.github.io/blog/author/nathaniel-case.html">Nathaniel Case</a>
        </address>
        <p>In <a href="http://qalthos.github.io/blog/category/civx.html">CIVX</a>. </p>
<p>tags: <a href="http://qalthos.github.io/blog/tag/peopledashboard.html">peopledashboard</a><a href="http://qalthos.github.io/blog/tag/widgets.html">widgets</a><a href="http://qalthos.github.io/blog/tag/surs.html">SURS</a></p>
</footer><!-- /.post-info -->                <p>So I'm back at RIT for the summer working on CIVX again. There's been a
lot of development on Moksha, the software stack CIVX runs on, and not
all of it was a trivial update. Still, many of the problems I
encountered were definitely my fault, not the ...</p>
                <a class="readmore" href="http://qalthos.github.io/blog/summer-of-civx.html">read more</a>
                                </div><!-- /.entry-content -->
            </article></li>
                            

                 
                        <li><article class="hentry">    
                <header>
                    <h1><a href="http://qalthos.github.io/blog/the-last-week.html" rel="bookmark"
                           title="Permalink to The Last Week">The Last Week</a></h1>
                </header>
                
                <div class="entry-content">
                <footer class="post-info">
                <p><img src="http://www.gravatar.com/avatar/3a3baabff105b46a458688ecf49901af" /></p>
                <abbr class="published" title="2011-06-21T22:56:00">
                Tue 21 June 2011
        </abbr>

                <address class="vcard author">
                By <a class="url fn" href="http://qalthos.github.io/blog/author/nathaniel-case.html">Nathaniel Case</a>
        </address>
        <p>In <a href="http://qalthos.github.io/blog/category/civx.html">CIVX</a>. </p>
<p>tags: <a href="http://qalthos.github.io/blog/tag/peopledashboard.html">peopledashboard</a><a href="http://qalthos.github.io/blog/tag/widgets.html">widgets</a><a href="http://qalthos.github.io/blog/tag/scrapers.html">scrapers</a><a href="http://qalthos.github.io/blog/tag/surs.html">SURS</a><a href="http://qalthos.github.io/blog/tag/fabulous.html">fabulous</a></p>
</footer><!-- /.post-info -->                <p>This week has been a mess for a lot of reasons. Let's see what I managed
to get through so far.
One of the things I got to look at this week is threebean's mokshactl
branch of CIVX and Moksha. This is a project to simplify the
administration ...</p>
                <a class="readmore" href="http://qalthos.github.io/blog/the-last-week.html">read more</a>
                                </div><!-- /.entry-content -->
            </article></li>
                            </ol><!-- /#posts-list -->
                            <p class="paginator">
        Page 1 / 2
            <a href="http://qalthos.github.io/blog/tag/surs2.html">&raquo;</a>
    </p>
                        </section><!-- /#content -->
              <section id="extras" class="body">
      <div class="blogroll">
      <h2>blogroll</h2>
      <ul>
              <li><a href="http://foss.rit.edu">FOSS@RIT</a></li>
            </ul>
    </div><!-- /.blogroll -->
        <div class="tagcloud">
      <h2>tag cloud</h2>
      <ul>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/hackathon.html">hackathon</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/rise.html">Rise</a></li>
                  <li class="tag-2"><a href="http://qalthos.github.io/blog/tag/openshift.html">openshift</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/floss-seminar.html">FLOSS-seminar</a></li>
                  <li class="tag-2"><a href="http://qalthos.github.io/blog/tag/election.html">election</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/schoolserver.html">schoolserver</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/knowledge.html">knowledge</a></li>
                  <li class="tag-2"><a href="http://qalthos.github.io/blog/tag/democracymap.html">democracymap</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/sugar.html">sugar</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/widgets.html">widgets</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/surs.html">SURS</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/fabulous.html">fabulous</a></li>
                  <li class="tag-3"><a href="http://qalthos.github.io/blog/tag/jquery.html">jQuery</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/hardware.html">hardware</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/peopledashboard.html">peopledashboard</a></li>
                  <li class="tag-3"><a href="http://qalthos.github.io/blog/tag/timeline.html">timeline</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/lemonade.html">lemonade</a></li>
                  <li class="tag-3"><a href="http://qalthos.github.io/blog/tag/polyscraper.html">polyscraper</a></li>
                  <li class="tag-2"><a href="http://qalthos.github.io/blog/tag/pydex.html">pyDex</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/pybotwar.html">pybotwar</a></li>
                  <li class="tag-3"><a href="http://qalthos.github.io/blog/tag/blog.html">blog</a></li>
                  <li class="tag-3"><a href="http://qalthos.github.io/blog/tag/groovebot.html">groovebot</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/journalism.html">journalism</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/python.html">python</a></li>
                  <li class="tag-2"><a href="http://qalthos.github.io/blog/tag/geowebdns.html">geowebdns</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/scrapers.html">scrapers</a></li>
                  <li class="tag-3"><a href="http://qalthos.github.io/blog/tag/wat.html">wat</a></li>
                  <li class="tag-3"><a href="http://qalthos.github.io/blog/tag/data alchemy.html">data alchemy</a></li>
                  <li class="tag-1"><a href="http://qalthos.github.io/blog/tag/wikiotics.html">wikiotics</a></li>
                  <li class="tag-4"><a href="http://qalthos.github.io/blog/tag/remysmoke.html">remysmoke</a></li>
              </ul>
    </div>
        <div class="social">
      <h2>social</h2>
      <ul>
        <li><a href="http://qalthos.github.io/blog/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>
        
                  <li><a href="http://github.com/Qalthos">Github</a></li>
                  <li><a href="http://gplus.to/qalthos">Google+</a></li>
              </ul>
    </div><!-- /.social -->
    </section><!-- /#extras -->

  <footer id="contentinfo" class="body">
    <address id="about" class="vcard body">
      Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
    </address><!-- /#about -->

    <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
  </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40338393-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>
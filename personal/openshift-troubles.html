<!DOCTYPE html>
<html lang="en">
<head>
  <title>OpenShift Troubles</title>
  <meta charset="utf-8" />
    <link rel="stylesheet" href="http://blog.katherineca.se/theme/css/main.min.css?1f773f3a" type="text/css" />
      <link href="http://blog.katherineca.se/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Why Not Wingnut? Atom Feed" />

  <!--[if IE]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <!--[if lte IE 7]>
    <link rel="stylesheet" type="text/css" media="all" href="http://blog.katherineca.se/css/ie.css"/>
    <script src="http://blog.katherineca.se/js/IE8.js" type="text/javascript"></script>
  <![endif]-->

  <!--[if lt IE 7]>
    <link rel="stylesheet" type="text/css" media="all" href="http://blog.katherineca.se/css/ie6.css"/>
  <![endif]-->

</head>

<body id="index" class="home">
  <header id="banner" class="body">
    <h1><a href="http://blog.katherineca.se/">Why Not Wingnut? </a></h1>
    <nav><ul>
        <li ><a href="http://blog.katherineca.se/category/civx.html">CIVX</a></li>
        <li ><a href="http://blog.katherineca.se/category/fossrit.html">FOSS@RIT</a></li>
        <li ><a href="http://blog.katherineca.se/category/meta.html">meta</a></li>
        <li class="active"><a href="http://blog.katherineca.se/category/personal.html">personal</a></li>
        <li><a href="http://qalthos.github.io/resume/resume.pdf">resume</a></li>
    </ul></nav>
  </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://blog.katherineca.se/personal/openshift-troubles.html" rel="bookmark"
           title="Permalink to OpenShift Troubles">OpenShift Troubles</a>
      </h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <p><img src="https://www.gravatar.com/avatar/3a3baabff105b46a458688ecf49901af" /></p>
        <abbr class="published" title="2012-02-03T06:47:00-05:00">
                Fri 03 February 2012
        </abbr>

        <address class="vcard author">
                By <a class="url fn" href="http://blog.katherineca.se/author/katherine-case.html">Katherine Case</a>
        </address>
<p>In <a href="http://blog.katherineca.se/category/personal.html">personal</a>. </p>
<p>tags: <a href="http://blog.katherineca.se/tag/floss-seminar.html">FLOSS-seminar</a><a href="http://blog.katherineca.se/tag/openshift.html">openshift</a></p>
</footer><!-- /.post-info -->      <p>Recently I've been playing with <a class="reference external" href="http://openshift.redhat.com/">OpenShift</a>, a new(ish) service from
Red Hat as a sort of 'push to cloud' deployment strategy. It's
interesting for people like me who can whip up a site quick, but don't
necessarily have the framework in place to host it.</p>
<p>Due to my work on <a class="reference external" href="http://civx.us/">CIVX</a>, I've gotten pretty familiar with
<a class="reference external" href="http://turbogears.org/">TurboGears</a>, and the idea of being able to take a site like that and
run it without having to set up apache or fiddle with paster sounded
real nice. Unfortunately, it was not so simple as it seems.</p>
<p>First up was to get something, anything, running. For a while, OpenShift
was throwing a <a class="reference external" href="http://www.flickr.com/photos/girliemac/6509400855/in/set-72157628409467125">500 error</a> when you tried to get a new application
registered. A brief poke into their IRC told had them aware of the
problem and it was fixed shortly. Next came the other part that should
have been easy, running TurboGears.</p>
<p><a class="reference external" href="http://lewk.org/">Luke</a> our favorite wizard around these parts, wrote a bit of <a class="reference external" href="https://github.com/lmacken/openshift-quickstarter">code</a>
to get most of the available applications up and running without too
much effort, including the currently unsupported TurboGears. Running
this went off without a problem, but the resulting site gave me another
happy 500 error. After a consult with Remy, we determined there were
some missing version requirements that kept the site from running. After
pulling those edits out of his repo and moving them upstream to Luke's,
I had a working default TurboGears site.</p>
<p>Until I tried to log in. Then I got another 500 error.
I was beginning to get used to this, but it was still annoying to make a
small change, then push it to the server and wait for the server to
update the settings before I could test it. Even more fun was the
occasional <a class="reference external" href="http://www.flickr.com/photos/girliemac/6540643319/in/set-72157628409467125/">503 error</a> when OpenShift couldn't keep up with my rapidly
building and tearing down sites.</p>
<p>Feeling that that was going to be a project by itself, I set about
moving all my non-db-interfacing files to this new repository. The
prebuilt version assumes that the site internally is named tg2app, and I
was having trouble convincing it to go by anything else. Eventually I
just decided to move files across one by one; first the templates that
don't care what they're named, then the root controller, than the new
model and widget. A lot of frustration, many <a class="reference external" href="http://www.flickr.com/photos/girliemac/6508023617/in/set-72157628409467125">403</a> and <a class="reference external" href="http://www.flickr.com/photos/girliemac/6508022985/in/set-72157628409467125/">404</a> errors
later, I had something that pretended to work as long as I didn't use
the database. But since the database is kind of the point of the site I
was building, this was not exactly acceptable.</p>
<p>So back to the drawing board then. I had a hunch something was wrong
when I saw SQLAlchemy errors scroll by every time I reloaded the site.
My best guess is that SQLAlchemy is failing to create the tables needed
to run the site and continuing on blindly. Once I realized that, I
dumped a test db from my local copy to the MySQL db, and suddenly
everything was working. Or almost everything, anyway.</p>
<p>I could read form the db fine, but any time I tried to modify it, I got
another dreaded 500 error. I poked into everything I could find to try
to figure out where it was failing, and finally determined it couldn't
be on my end, as my local copy worked just as expected.</p>
<p>Finally I stumbled across the answer, almost accidentally. When I moved
the db from local sqlite to MySQL, I failed to set the auto increment
setting on the id of my new databases, so when I neglected to provide an
id for the new entries I was making, MySQL quite rightly complained at
me. Unfortunately, since I can't find how to re-enable debug mode (nor
should I really try), I wasn't getting any good error messages.
So what is the site that has been giving me all these troubles? It's a
little site I set up to publicly shame Remy into stopping smoking:
<a class="reference external" href="http://remysmoke-qalthos.rhcloud.com/">remysmoke-qalthos.rhcloud.com</a></p>

    </div><!-- /.entry-content -->
    <hr />
    <h5>Similar posts to this one</h5>
    <ul>
        <li><a href="http://blog.katherineca.se/fossrit/final-stretch.html">Final Stretch</a></li>
        <li><a href="http://blog.katherineca.se/personal/openshift-troubles-continued.html">Openshift Troubles Continued</a></li>
        <li><a href="http://blog.katherineca.se/fossrit/turbogears2-on-openshift-just-like-it-should-be.html">TurboGears2 on OpenShift, just like it should be</a></li>
        <li><a href="http://blog.katherineca.se/fossrit/floss-seminar-update.html">FLOSS Seminar Update</a></li>
        <li><a href="http://blog.katherineca.se/fossrit/first-floss-seminar-post.html">First FLOSS Seminar post</a></li>
    </ul>

  </article>
</section>
  <section id="extras" class="body">
    <div class="social">
      <h2>social</h2>
      <ul>
        <li><a href="http://blog.katherineca.se/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

          <li><a href="http://github.com/Qalthos">Github</a></li>
      </ul>
    </div><!-- /.social -->
  </section><!-- /#extras -->

  <footer id="contentinfo" class="body">
    <address id="about" class="vcard body">
      Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
    </address><!-- /#about -->

    <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
  </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40338393-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>